<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>update profile</title>

  <!-- custom css file link  -->
  <link rel="stylesheet" th:href="@{/css/all.css}">

</head>
<body>

<div class="update-profile">

  <form onsubmit="fun()" th:action="@{/user/update}" th:method="@{post}" th:object="${change}" enctype="multipart/form-data">
    <img id ="inp-img">
    <!--        <img th:src="'data:image/png;base64,'+${change.imageBase64}"/>-->
    <div class="flex">
      <div class="inputBox">
        <input type="hidden" th:value="${change.id}" th:field="*{id}" class="box">
        <span>Full Name :</span>
        <input type="text" th:value="${change.fullname}" th:field="*{fullname}" class="box">
        <span>your email :</span>
        <input type="email" th:value="${change.email}" th:field="*{email}" class="box">
        <span>update your pic :</span>
        <input id="input-img" type="file" name="image" accept="image/*" class="box">
      </div>
      <div class="inputBox">
        <span>new password :</span>
        <input type="password" th:value="${change.password}" th:field="*{password}" placeholder="enter new password" class="box">
        <span>confirm password :</span>
        <input type="password" id = "confirm_password" placeholder="confirm new password" class="box">
      </div>
    </div>
    <input type="submit" value="update profile" name="update_profile" class="btn">
    <a href="/profile" class="delete-btn">go back</a>
  </form>


</div>
</body>
<script>
  const inputImg = document.getElementById("input-img");
  const inpImg = document.getElementById("inp-img");
  function getImg(event) {
    const file = event.target.files[0]; // 0 = get the first file

    // console.log(file);

    let url = window.URL.createObjectURL(file);

    // console.log(url)

    inpImg.src = url;
  }

  inputImg?.addEventListener("change", getImg);

  function fun(){
    alert("update successfully")
  }
</script>
</html>